{% assign related_collection = collections[section.settings.collection] %}
<section class="section section--accent">
  <div class="container">
    <h2 class="section-title">Related Products</h2>
    <div class="product-cards">
      {% if related_collection != blank %}
        {% for item in related_collection.products limit: 4 %}
          {% if item.id != product.id %}
            <article class="product-card">
              <a href="{{ item.url }}">
                {% if item.featured_image %}
                  <img src="{{ item.featured_image | image_url: width: 500 }}" alt="{{ item.featured_image.alt | default: item.title | escape }}" loading="lazy" width="500" height="500">
                {% endif %}
                <h3>{{ item.title }}</h3>
                <p>{{ item.price | money }}</p>
              </a>
            </article>
          {% endif %}
        {% endfor %}
      {% else %}
        <p>Add a collection in this section settings to show related products.</p>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Related products",
  "settings": [
    {"type": "collection", "id": "collection", "label": "Collection"}
  ]
}
{% endschema %}
